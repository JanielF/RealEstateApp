@using RealEstateApp.Core.Application.ViewModels.RealEstateProperty;
@using RealEstateApp.Core.Application.ViewModels.Upgrade;
@model RealEstatePropertyDetailsViewModel;
@{
    int carouselCount1 = 1;
    int carouselCount2 = 2;
    ViewData["Title"] = "Details";

}

<!-- Carousel -->
<div id="carouselExampleIndicators" class="carousel slide mb-5">
    <div class="carousel-indicators">

        <button type="button"
                data-bs-target="#carouselExampleIndicators"
                data-bs-slide-to="0"
                class="active bg-white"
                aria-current="true"
                aria-label="Slide 1"></button>

        @if (Model.Property.Images != null && Model.Property.Images.Count > 1)
        {
            @for (int i = 1; i < Model.Property.Images.Count; i++)
            {
                <button type="button"
                        class="bg-white"
                        data-bs-target="#carouselExampleIndicators"
                        data-bs-slide-to="@carouselCount1"
                        aria-label="Slide @carouselCount2"></button>
                carouselCount1++;
                carouselCount2++;
            }
        }
    </div>

    <div class="carousel-inner">

        <div class="carousel-item active">
            <img src="@Model.Property.Images.ElementAt(0)"
                 class="d-block w-100 carousel-img"
                 height="700"
                 alt="..." />
        </div>
        @if (Model.Property.Images.Count > 1)
        {
            @for (int i = 1; i < Model.Property.Images.Count; i++)
            {
                <div class="carousel-item">
                    <img src="@Model.Property.Images.ElementAt(i)"
                         class="d-block w-100 carousel-img"
                         height="700"
                         alt="..." />
                </div>
            }
        }

    </div>

    <button class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev">
        <div class="p-2 d-flex bg-light rounded-circle">
            <p class="carousel-control-prev-icon mb-0"
               aria-hidden="true"></p>
        </div>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next">
        <div class="p-2 d-flex bg-light rounded-circle">
            <p class="carousel-control-next-icon mb-0" aria-hidden="true"></p>
        </div>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Property Details -->
<div class="container mb-5">
    <div class="row g-5">

        <div class="col-md-8">
            <h2 class="pb-3 mb-2 fw-bold">
                <span class="principalBlueText">#</span>@Model.Property.Guid
            </h2>

            <!-- Details section -->
            <article class="">
                <h2 class="display-6 link-body-emphasis mb-2">@Model.Property.Address</h2>
                <p class="fs-4 fw-medium mb-1">@Model.Property.TypeOfSale.Name</p>
                <p class="fs-4 fw-bold principalBlueText">RD$@Model.Property.Price</p>

                <div class="container mb-4 p-0">
                    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-2">

                        <div class="col">
                            <div class="py-2 d-flex align-items-center inputBackground justify-content-center gap-2 border cardCustomize">
                                <p class="mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="16" viewBox="0 0 31 19" fill="none">
                                        <path d="M0 19V10.3636C0 9.85236 0.146963 9.3077 0.440889 8.72964C0.734815 8.15158 1.16193 7.71746 1.72222 7.42727V3.45455C1.72222 2.48036 2.05346 1.66106 2.71594 0.996637C3.37843 0.332212 4.19533 0 5.16667 0H12.9167C13.5103 0 14.0172 0.122636 14.4374 0.367909C14.8565 0.61203 15.2107 0.95 15.5 1.38182C15.7893 0.95 16.1435 0.61203 16.5626 0.367909C16.9828 0.122636 17.4897 0 18.0833 0H25.8333C26.8047 0 27.6216 0.332212 28.2841 0.996637C28.9465 1.66106 29.2778 2.48036 29.2778 3.45455V7.42727C29.8381 7.71746 30.2652 8.15158 30.5591 8.72964C30.853 9.3077 31 9.85236 31 10.3636V19H29.2778V15.5455H1.72222V19H0ZM16.3611 6.90909H27.5556V3.45455C27.5556 2.96515 27.3902 2.55521 27.0596 2.22473C26.7289 1.89424 26.3201 1.72842 25.8333 1.72727H18.0833C17.5954 1.72727 17.1866 1.89309 16.8571 2.22473C16.5276 2.55636 16.3623 2.9663 16.3611 3.45455V6.90909ZM3.44444 6.90909H14.6389V3.45455C14.6389 2.96515 14.4736 2.55521 14.1429 2.22473C13.8122 1.89424 13.4035 1.72842 12.9167 1.72727H5.16667C4.6787 1.72727 4.26996 1.89309 3.94044 2.22473C3.61093 2.55636 3.44559 2.9663 3.44444 3.45455V6.90909ZM1.72222 13.8182H29.2778V10.3636C29.2778 9.87424 29.1124 9.4643 28.7818 9.13382C28.4511 8.80333 28.0424 8.63752 27.5556 8.63636H3.44444C2.95648 8.63636 2.54774 8.80218 2.21822 9.13382C1.8887 9.46546 1.72337 9.87539 1.72222 10.3636V13.8182Z" fill="#47FFE9" />
                                    </svg>
                                </p>
                                <p class="mb-0">@Model.Property.NumberOfBedrooms Room(s)</p>
                            </div>
                        </div>

                        <div class="col">
                            <div class="py-2 d-flex align-items-center inputBackground justify-content-center gap-2 border cardCustomize">
                                <p class="mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 26 26" fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.00047 1.81381C3.90847 1.81381 3.02326 2.69879 3.02326 3.79051V12.0903H25.093C25.3336 12.0903 25.5643 12.1858 25.7344 12.3558C25.9044 12.5259 26 12.7565 26 12.997C26 13.2375 25.9044 13.4681 25.7344 13.6382C25.5643 13.8082 25.3336 13.9037 25.093 13.9037H24.7689C24.7774 13.9582 24.7822 14.0126 24.7859 14.0682C24.7907 14.1383 24.7907 14.2133 24.7907 14.2858V14.3329C24.7907 14.7863 24.7907 15.0523 24.7713 15.3485C24.5996 18.0518 23.1388 20.5496 21.0213 22.1817C21.038 22.2083 21.0533 22.2358 21.0673 22.2639L22.2766 24.6819C22.3309 24.7886 22.3635 24.9049 22.3726 25.0242C22.3817 25.1436 22.3671 25.2635 22.3296 25.3772C22.2922 25.4908 22.2325 25.5959 22.1542 25.6864C22.0759 25.7769 21.9805 25.8511 21.8734 25.9045C21.7663 25.958 21.6497 25.9897 21.5303 25.9979C21.4108 26.0061 21.291 25.9905 21.1776 25.9522C21.0642 25.9138 20.9595 25.8534 20.8696 25.7744C20.7797 25.6954 20.7063 25.5994 20.6537 25.492L19.4831 23.1526C18.2733 23.7707 16.9379 24.1036 15.5794 24.1258H15.571C14.6761 24.1596 13.8006 24.1802 13 24.1802C12.1994 24.1802 11.3239 24.1596 10.429 24.1258H10.4206C9.06209 24.1036 7.72674 23.7707 6.51693 23.1526L5.34633 25.492C5.29369 25.5994 5.2203 25.6954 5.13038 25.7744C5.04046 25.8534 4.93579 25.9138 4.8224 25.9522C4.70901 25.9905 4.58916 26.0061 4.46974 25.9979C4.35032 25.9897 4.2337 25.958 4.12661 25.9045C4.01951 25.8511 3.92406 25.7769 3.84575 25.6864C3.76745 25.5959 3.70784 25.4908 3.67036 25.3772C3.63288 25.2635 3.61828 25.1436 3.62739 25.0242C3.6365 24.9049 3.66914 24.7886 3.72344 24.6819L4.93274 22.2639C4.94664 22.2358 4.96198 22.2083 4.9787 22.1817C2.86121 20.5496 1.39916 18.0518 1.22865 15.3485C1.2112 15.0103 1.20475 14.6716 1.2093 14.3329V13.9037H0.906977C0.666432 13.9037 0.435739 13.8082 0.265647 13.6382C0.0955562 13.4681 0 13.2375 0 12.997C0 12.7565 0.0955562 12.5259 0.265647 12.3558C0.435739 12.1858 0.666432 12.0903 0.906977 12.0903H1.2093V3.79051C1.20923 2.90957 1.5161 2.05612 2.07717 1.37684C2.63824 0.697569 3.41846 0.234898 4.28374 0.0683549C5.14901 -0.0981886 6.04529 0.0417978 6.81852 0.464253C7.59176 0.886709 8.19365 1.56525 8.52074 2.38324L8.65377 2.71572C9.64624 2.46242 10.6946 2.54402 11.6359 2.94784C12.2218 3.20032 12.7516 3.56694 13.1942 4.0263C13.6369 4.48567 13.9836 5.02858 14.2141 5.62335C14.3002 5.84238 14.2978 6.08631 14.2073 6.30357C14.1168 6.52083 13.9454 6.6944 13.7292 6.78761L6.52177 9.88989C6.41021 9.93807 6.29011 9.96334 6.16859 9.96422C6.04707 9.96509 5.92662 9.94154 5.81438 9.89496C5.70214 9.84839 5.60041 9.77974 5.51523 9.69309C5.43005 9.60645 5.36315 9.50357 5.31851 9.39057C4.84326 8.18191 4.85192 6.83668 5.3427 5.63423C5.68739 4.77768 6.26507 4.03472 7.01033 3.48947L6.83619 3.05665C6.68947 2.68981 6.43617 2.37533 6.10896 2.1538C5.78175 1.93227 5.39565 1.81384 5.00047 1.81381ZM3.42595 13.9037H3.30502C3.22835 13.9087 3.15647 13.9427 3.10409 13.9989C3.05171 14.0551 3.02279 14.1292 3.02326 14.206V14.3063C3.02326 14.7924 3.02326 15.0003 3.03898 15.2336C3.2627 18.7663 6.29805 21.917 9.81953 22.2736C10.0553 22.2978 10.186 22.3014 10.4967 22.3135C11.3771 22.3462 12.2297 22.3667 13 22.3667C13.7703 22.3667 14.6229 22.3462 15.5033 22.3135C15.814 22.3014 15.9447 22.2966 16.1805 22.2724C19.702 21.917 22.7373 18.7663 22.9622 15.2336C22.9767 15.0003 22.9767 14.7924 22.9767 14.3063V14.1867C22.9767 14.1842 22.9767 14.1842 22.9767 14.1867C22.9719 14.1133 22.9405 14.0443 22.8884 13.9924C22.8363 13.9406 22.7671 13.9095 22.6938 13.905C22.695 13.905 22.6962 13.905 22.6938 13.905H22.6744L22.5753 13.9037H3.42595ZM10.9236 4.61625C10.5444 4.45365 10.1343 4.37518 9.72181 4.38624C9.30928 4.39731 8.90406 4.49764 8.53405 4.68033C7.84474 5.01995 7.30607 5.60329 7.02242 6.31731C6.83127 6.78671 6.75258 7.29431 6.79265 7.79954L12.0894 5.51937C11.7837 5.12384 11.382 4.81297 10.9224 4.61625" fill="#47FFE9" />
                                    </svg>
                                </p>
                                <p class="mb-0">@Model.Property.NumberOfBathrooms Bath(s)</p>
                            </div>
                        </div>

                        <div class="col">
                            <div class="py-2 d-flex align-items-center inputBackground justify-content-center gap-2 border cardCustomize">
                                <p class="mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 28 28" fill="none">
                                        <path d="M27.4141 7.1711L20.8283 0.585961C20.6426 0.400191 20.4221 0.252828 20.1794 0.152288C19.9368 0.0517478 19.6767 0 19.414 0C19.1513 0 18.8913 0.0517478 18.6486 0.152288C18.4059 0.252828 18.1854 0.400191 17.9997 0.585961L0.585908 18.0001C0.400155 18.1858 0.252805 18.4063 0.152274 18.649C0.0517432 18.8917 0 19.1518 0 19.4145C0 19.6772 0.0517432 19.9373 0.152274 20.18C0.252805 20.4227 0.400155 20.6432 0.585908 20.8289L7.17171 27.414C7.35742 27.5998 7.57791 27.7472 7.82057 27.8477C8.06324 27.9483 8.32333 28 8.58599 28C8.84866 28 9.10875 27.9483 9.35141 27.8477C9.59408 27.7472 9.81456 27.5998 10.0003 27.414L27.4141 9.99991C27.5998 9.81419 27.7472 9.59368 27.8477 9.351C27.9483 9.10831 28 8.8482 28 8.58551C28 8.32282 27.9483 8.06271 27.8477 7.82002C27.7472 7.57733 27.5998 7.35683 27.4141 7.1711ZM8.58537 26.0003L2.00081 19.4139L6.00054 15.4138L9.29282 18.7076C9.38572 18.8005 9.49602 18.8742 9.6174 18.9245C9.73878 18.9748 9.86889 19.0007 10.0003 19.0007C10.1317 19.0007 10.2618 18.9748 10.3831 18.9245C10.5045 18.8742 10.6148 18.8005 10.7077 18.7076C10.8006 18.6147 10.8743 18.5044 10.9246 18.383C10.9749 18.2616 11.0008 18.1315 11.0008 18.0001C11.0008 17.8687 10.9749 17.7386 10.9246 17.6172C10.8743 17.4958 10.8006 17.3855 10.7077 17.2926L7.4142 14L10.0003 11.4137L13.2925 14.7075C13.4802 14.8952 13.7347 15.0006 14 15.0006C14.2653 15.0006 14.5198 14.8952 14.7075 14.7075C14.8951 14.5199 15.0005 14.2654 15.0005 14C15.0005 13.7346 14.8951 13.4801 14.7075 13.2925L11.4139 9.99991L14 7.41361L17.2923 10.7074C17.3852 10.8003 17.4955 10.874 17.6169 10.9243C17.7382 10.9746 17.8683 11.0005 17.9997 11.0005C18.1311 11.0005 18.2612 10.9746 18.3826 10.9243C18.504 10.874 18.6143 10.8003 18.7072 10.7074C18.8001 10.6145 18.8738 10.5042 18.9241 10.3828C18.9743 10.2614 19.0002 10.1313 19.0002 9.99991C19.0002 9.86852 18.9743 9.7384 18.9241 9.61701C18.8738 9.49561 18.8001 9.38531 18.7072 9.2924L15.4137 5.99983L19.4134 1.99974L25.9992 8.58613L8.58537 26.0003Z" fill="#47FFE9" />
                                    </svg>
                                </p>
                                <p class="mb-0">@Model.Property.Size mt</p>
                            </div>
                        </div>

                    </div>
                </div>

                <h3 class="fw-medium fw-medium mb-3">About This Home</h3>

                    <p>@Model.Property.Description</p>
                <!-- Upgrades -->
                <h3 class="fw-medium fw-medium mb-3">Upgrades</h3>
                <div class="container mb-4 p-0">
                    <div class="row row-cols-1 row-cols-sm-3 row-cols-md-4 g-2">

                        @foreach (UpgradeViewModel upgrade in Model.Property.Upgrades)
                        {
                            <div class="col">
                                <div class="py-2 d-flex align-items-center inputBackground justify-content-center gap-2 border cardCustomize">
                                    <p class="mb-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#47FFE9" class="bi bi-patch-check" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0" />
                                            <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z" />
                                        </svg>
                                    </p>
                                    <p class="mb-0">@upgrade.Name</p>
                                </div>
                            </div>
                        }

                    </div>
                </div>
            </article>

        </div>

        <!-- Agent section -->
        <div class="col-md-4">
            <div class="position-sticky" style="top: 2rem;">
                <div class="p-5 mb-3 bg-body-tertiary cardCustomize border">
                    <div class="d-flex justify-content-center mb-3">
                        <h4 class="text-center fw-light">Are you interested in this property? <span class="fw-bold principalBlueText">Ask for advice</span> </h4>
                    </div>
                    <div class="d-flex justify-content-center mb-3">
                        <img src="@(Model.Agent.UserImagePath != null && Model.Agent.UserImagePath != string.Empty ? Model.Agent.UserImagePath : "https://t4.ftcdn.net/jpg/04/73/25/49/360_F_473254957_bxG9yf4ly7OBO5I0O5KABlN930GwaMQz.jpg")" class="object-fit-cover rounded-circle" width="150" height="150" alt="">
                    </div>
                    <div>
                        <div class="d-flex justify-content-center mb-3">
                            <p class="mb-0 fs-5 text-center fw-medium">@Model.Agent.FirstName @Model.Agent.LastName</p>
                        </div>
                        <div class="d-flex gap-3 mb-3">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#47FFE9" class="bi bi-telephone" viewBox="0 0 16 16">
                                    <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                </svg>
                            </div>
                            <div>
                                <p class="mb-0 principalBlueText fw-medium">Phone number</p>
                                <a href="tel:@Model.Agent.PhoneNumber" class="text-decoration-none text-white">@Model.Agent.PhoneNumber</a>
                            </div>
                        </div>

                        <div class="d-flex gap-3">
                            <div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#47FFE9" class="bi bi-envelope" viewBox="0 0 16 16">
                                    <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                                </svg>
                            </div>
                            <div>
                                <p class="mb-0 principalBlueText fw-medium">Email</p>
                                <a href="mailto:@Model.Agent.Email" class="text-decoration-none text-white">@Model.Agent.Email</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
